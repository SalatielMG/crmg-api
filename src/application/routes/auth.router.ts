import {Router} from 'express';
import {Router as RouterType} from 'express-serve-static-core';
import {adaptRoute} from '@/application/config/express-router-adapter';
import {baseControllerFactory} from '@/infrastructure/entry-points/factories/base-controller-factory';
import {ACTION_CONTROLLER} from '@/infrastructure/helpers/constant';
import {AuthController} from '@/infrastructure/entry-points/controllers/auth/auth.controller';

const router: RouterType = Router();

router.post('/send-invitation',
    adaptRoute(baseControllerFactory(ACTION_CONTROLLER.SEND_INVITATION)));
router.post('/confirm-token-invitation',
    adaptRoute(baseControllerFactory(ACTION_CONTROLLER.CONFIRM_EMAIL_TOKEN))); // confirmarel token que no sea valido y que no haya sido expirado.
router.post('/set-password'); // verificar que no existe niguna confirmacion de correo pendiente. debe ser al menos una ya veificada
router.post('/forgot-password'); // enviar token para reestablecimiento de contrase;a
router.post('/login', adaptRoute(new AuthController('LOGIN'))); // Inciar sesion
router.post('/refresh-access-token', adaptRoute(new AuthController('REFRESH_ACCESS_TOKEN'))); // Actualizat access token
router.put('/manual-update-password', adaptRoute(new AuthController('MANUAL_UPDATE_PASSWORD'))); // Establecer manualmente una contrasena a un usuario
// router.get('/test/email', (req, res) => {
//     let data = {"data":{"restaurant":{"name":"Cecconi's Bar","address":"Paseo de las Palmas 340, Miguel Hidalgo, 11000 Distrito Federal, DF"},"orderId":2902,"date":"01/03/2021 19:28:58","deliveryType":"Para llevar","deliveryTime":"Ordenar ahora","guests":5,"coupon":null,"pan":"************3272","items":[{"variantId":297,"quantity":6,"menuId":4,"comments":"Prueba coment","ingredientCategories":[{"id":5,"selected":[14],"category":"Cerveza","ingredients":[{"id":34,"name":"Jugo de Tomate"}],"nameIngredients":"Jugo de Tomate"}],"ingCatIds":[5],"ingOptIds":[14],"priceVariant":4000,"variantDishMenuId":null,"price":42000,"priceFormatter":"MX$ 420.00","name":"Cerveza Corona (Promoción 2x1) - Light","image":"https://food-market-files.s3.amazonaws.com/variants/297?AWSAccessKeyId=AKIAJFXVKUNXKDM23KEA&Expires=1614649738&Signature=nABcrFjovHCwqGEPOB0EkBkLGXU%3D","description":"Extra o Light","variantInfo":{"id":297,"name":"Light","price":4000,"recipeId":null,"typeVariant":1,"ingredientRecipeId":51,"deletedAt":null,"dish":{"id":231,"name":"Cerveza Corona (Promoción 2x1)","description":"Extra o Light","hidden":false,"deletedAt":null,"variants":[{"id":296,"deletedAt":null},{"id":297,"deletedAt":null}],"image":{"id":32,"path":"dishes/231","logo":false,"type":null,"marketID":null,"franchiseID":null,"establishmentID":null,"generalCategoryID":null,"created_at":"2020-09-30T16:33:47.491Z","updated_at":"2020-09-30T16:33:47.491Z","deleted_at":null,"establishment_id":null,"franchise_id":null,"general_category_id":null,"market_id":null}},"image":{"id":28,"path":"variants/297","logo":false,"type":null,"marketID":null,"franchiseID":null,"establishmentID":null,"generalCategoryID":null,"created_at":"2020-09-30T16:23:15.372Z","updated_at":"2020-09-30T16:23:15.372Z","deleted_at":null,"establishment_id":null,"franchise_id":null,"general_category_id":null,"market_id":null},"ingredientCategories":[{"id":5,"category":"Cerveza","extra":false,"multiple":false,"deletedAt":null,"variantOptions":[{"id":14,"ingredientId":34,"isIngredient":true,"portion":null,"measurementUnitId":null,"extraPrice":3000,"deletedAt":null,"ingredient":{"id":34,"name":"Jugo de Tomate"}}]}]},"status":1,"statusText":"Platillo disponible"},{"variantId":300,"quantity":4,"menuId":4,"comments":"hfghfgh","ingredientCategories":[{"id":8,"selected":[29],"category":"Cerveza","ingredients":[{"id":26,"name":"Sencilla"}],"nameIngredients":"Sencilla"}],"ingCatIds":[8],"ingOptIds":[29],"priceVariant":4000,"variantDishMenuId":null,"price":16000,"priceFormatter":"MX$ 160.00","name":"Cerveza Leon","image":"https://food-market-files.s3.amazonaws.com/dishes/234?AWSAccessKeyId=AKIAJFXVKUNXKDM23KEA&Expires=1614649738&Signature=ZkQD25y8AqVJSBHwz2JLEBktIi4%3D","description":"","variantInfo":{"id":300,"name":null,"price":4000,"recipeId":null,"typeVariant":1,"ingredientRecipeId":52,"deletedAt":null,"dish":{"id":234,"name":"Cerveza Leon","description":"","hidden":false,"deletedAt":null,"variants":[{"id":300,"deletedAt":null}],"image":{"id":30,"path":"dishes/234","logo":false,"type":null,"marketID":null,"franchiseID":null,"establishmentID":null,"generalCategoryID":null,"created_at":"2020-09-30T16:28:18.729Z","updated_at":"2020-09-30T16:28:18.729Z","deleted_at":null,"establishment_id":null,"franchise_id":null,"general_category_id":null,"market_id":null}},"image":{"id":30,"path":"dishes/234","logo":false,"type":null,"marketID":null,"franchiseID":null,"establishmentID":null,"generalCategoryID":null,"created_at":"2020-09-30T16:28:18.729Z","updated_at":"2020-09-30T16:28:18.729Z","deleted_at":null,"establishment_id":null,"franchise_id":null,"general_category_id":null,"market_id":null},"ingredientCategories":[{"id":8,"category":"Cerveza","extra":false,"multiple":false,"deletedAt":null,"variantOptions":[{"id":29,"ingredientId":26,"isIngredient":true,"portion":null,"measurementUnitId":null,"extraPrice":null,"deletedAt":null,"ingredient":{"id":26,"name":"Sencilla"}}]}]},"status":1,"statusText":"Platillo disponible"},{"variantId":299,"quantity":7,"menuId":4,"comments":"fghfg","ingredientCategories":[{"id":7,"selected":[23],"category":"Cerveza","ingredients":[{"id":43,"name":"Cubana"}],"nameIngredients":"Cubana"}],"ingCatIds":[7],"ingOptIds":[23],"priceVariant":4000,"variantDishMenuId":null,"price":42000,"priceFormatter":"MX$ 420.00","name":"Cerveza Indio","image":"https://food-market-files.s3.amazonaws.com/dishes/233?AWSAccessKeyId=AKIAJFXVKUNXKDM23KEA&Expires=1614649738&Signature=AyKgrJmNyjxGcuIoZtCnDACQDEE%3D","description":"","variantInfo":{"id":299,"name":null,"price":4000,"recipeId":null,"typeVariant":1,"ingredientRecipeId":49,"deletedAt":null,"dish":{"id":233,"name":"Cerveza Indio","description":"","hidden":false,"deletedAt":null,"variants":[{"id":299,"deletedAt":null}],"image":{"id":29,"path":"dishes/233","logo":false,"type":null,"marketID":null,"franchiseID":null,"establishmentID":null,"generalCategoryID":null,"created_at":"2020-09-30T16:25:28.289Z","updated_at":"2020-09-30T16:25:28.289Z","deleted_at":null,"establishment_id":null,"franchise_id":null,"general_category_id":null,"market_id":null}},"image":{"id":29,"path":"dishes/233","logo":false,"type":null,"marketID":null,"franchiseID":null,"establishmentID":null,"generalCategoryID":null,"created_at":"2020-09-30T16:25:28.289Z","updated_at":"2020-09-30T16:25:28.289Z","deleted_at":null,"establishment_id":null,"franchise_id":null,"general_category_id":null,"market_id":null},"ingredientCategories":[{"id":7,"category":"Cerveza","extra":false,"multiple":false,"deletedAt":null,"variantOptions":[{"id":23,"ingredientId":43,"isIngredient":true,"portion":null,"measurementUnitId":null,"extraPrice":2000,"deletedAt":null,"ingredient":{"id":43,"name":"Cubana"}}]}]},"status":1,"statusText":"Platillo disponible"}],"subtotal":"MX$ 1,000.00","service_price":"MX$ 0.00","discount":"MX$ 0.00","total":"MX$ 1,000.00"},"filename":"C:\\Kimo Projects\\Piknik - App\\piknik-api-usuarios\\emails\\detail_order.pug"};
//     res.render('layout.pug');
//     // return res.render('layout.pug');
// });

export default router;
